{"ast":null,"code":"import { environment } from '../../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/user.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nfunction ProfileViewComponent_img_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 15);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r0.profile.profilePhoto, i0.ɵɵsanitizeUrl);\n  }\n}\nexport class ProfileViewComponent {\n  constructor(userService) {\n    this.userService = userService;\n    this.loading = true;\n    this.error = '';\n  }\n  ngOnInit() {\n    this.loadProfile();\n  }\n  loadProfile() {\n    this.userService.getProfile().subscribe(response => {\n      // Patch profilePhoto to be absolute if needed\n      if (response.user && response.user.profilePhoto) {\n        if (response.user.profilePhoto.startsWith('/uploads')) {\n          // Only prepend if it's a relative path\n          const baseApiUrl = environment.apiUrl.replace(/\\/api$/, '');\n          response.user.profilePhoto = baseApiUrl + response.user.profilePhoto;\n        }\n        // If already absolute (starts with http), do nothing\n      }\n\n      this.profile = response.user;\n      console.log('Loaded profile:', this.profile);\n      this.loading = false;\n    }, error => {\n      this.error = error.message;\n      this.loading = false;\n    });\n  }\n  static {\n    this.ɵfac = function ProfileViewComponent_Factory(t) {\n      return new (t || ProfileViewComponent)(i0.ɵɵdirectiveInject(i1.UserService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProfileViewComponent,\n      selectors: [[\"app-profile-view\"]],\n      decls: 41,\n      vars: 5,\n      consts: [[1, \"container\"], [1, \"profile-title\"], [1, \"alert\", \"alert-success\", \"d-flex\", \"align-items-center\", \"mt-4\", 2, \"font-size\", \"1.1rem\"], [\"alt\", \"Profile Photo\", \"class\", \"profile-photo me-3\", \"style\", \"width:60px;height:60px;object-fit:cover;border-radius:50%;border:2px solid #198754;\", 3, \"src\", 4, \"ngIf\"], [1, \"me-2\", 2, \"font-size\", \"1.5rem\", \"color\", \"#198754\"], [1, \"card\"], [1, \"profile-header\"], [\"alt\", \"Profile Photo\", 1, \"profile-photo\", 3, \"src\"], [1, \"profile-info\"], [1, \"info-item\"], [1, \"label\"], [1, \"value\"], [1, \"actions\"], [\"routerLink\", \"/profile/edit\", 1, \"btn\", \"btn-primary\"], [1, \"btn\", \"btn-danger\", \"ms-2\", 3, \"click\"], [\"alt\", \"Profile Photo\", 1, \"profile-photo\", \"me-3\", 2, \"width\", \"60px\", \"height\", \"60px\", \"object-fit\", \"cover\", \"border-radius\", \"50%\", \"border\", \"2px solid #198754\", 3, \"src\"]],\n      template: function ProfileViewComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n          i0.ɵɵtext(2, \"Profile\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 2);\n          i0.ɵɵtemplate(4, ProfileViewComponent_img_4_Template, 1, 1, \"img\", 3);\n          i0.ɵɵelementStart(5, \"span\", 4);\n          i0.ɵɵtext(6, \"\\u2713\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"div\")(8, \"strong\");\n          i0.ɵɵtext(9, \"Credentials Verified!\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(10, \"br\");\n          i0.ɵɵtext(11, \" Your credentials have been successfully verified. You are now logged in. \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(12, \"div\", 2)(13, \"span\", 4);\n          i0.ɵɵtext(14, \"\\u2713\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"div\")(16, \"strong\");\n          i0.ɵɵtext(17, \"OTP Verified!\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(18, \"br\");\n          i0.ɵɵtext(19, \" Your OTP has been successfully verified. You are now logged in. \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(20, \"div\", 5)(21, \"div\", 6);\n          i0.ɵɵelement(22, \"img\", 7);\n          i0.ɵɵelementStart(23, \"h2\");\n          i0.ɵɵtext(24);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(25, \"div\", 8)(26, \"div\", 9)(27, \"span\", 10);\n          i0.ɵɵtext(28, \"Email:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"span\", 11);\n          i0.ɵɵtext(30);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(31, \"div\", 9)(32, \"span\", 10);\n          i0.ɵɵtext(33, \"Mobile:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(34, \"span\", 11);\n          i0.ɵɵtext(35);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(36, \"div\", 12)(37, \"button\", 13);\n          i0.ɵɵtext(38, \"Edit Profile\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(39, \"button\", 14);\n          i0.ɵɵlistener(\"click\", function ProfileViewComponent_Template_button_click_39_listener() {\n            return ctx.logout();\n          });\n          i0.ɵɵtext(40, \"Logout\");\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.profile == null ? null : ctx.profile.profilePhoto);\n          i0.ɵɵadvance(18);\n          i0.ɵɵproperty(\"src\", (ctx.profile == null ? null : ctx.profile.profilePhoto) || \"assets/kamal.jpg\", i0.ɵɵsanitizeUrl);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.profile == null ? null : ctx.profile.name);\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate(ctx.profile == null ? null : ctx.profile.email);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate(ctx.profile == null ? null : ctx.profile.mobile);\n        }\n      },\n      dependencies: [i2.NgIf, i3.RouterLink],\n      styles: [\".profile-container[_ngcontent-%COMP%] {\\n  padding: 20px;\\n  background: white;\\n  border-radius: 8px;\\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n}\\n\\n.profile-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  margin-bottom: 20px;\\n}\\n\\n.profile-photo[_ngcontent-%COMP%] {\\n  width: 100px;\\n  height: 100px;\\n  border-radius: 50%;\\n  object-fit: cover;\\n  margin-right: 20px;\\n}\\n\\n.profile-info[_ngcontent-%COMP%] {\\n  flex: 1;\\n}\\n\\n.profile-actions[_ngcontent-%COMP%] {\\n  margin-top: 20px;\\n}\\n\\n.edit-btn[_ngcontent-%COMP%] {\\n  margin-right: 10px;\\n}\\n\\n.delete-btn[_ngcontent-%COMP%] {\\n  color: #dc3545;\\n}\\n\\n.error[_ngcontent-%COMP%] {\\n  color: #dc3545;\\n  font-size: 0.875rem;\\n  margin-top: 0.25rem;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdXNlci9wcm9maWxlLXZpZXcvcHJvZmlsZS12aWV3LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSx3Q0FBQTtBQUNGOztBQUVBO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsbUJBQUE7QUFDRjs7QUFFQTtFQUNFLFlBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxPQUFBO0FBQ0Y7O0FBRUE7RUFDRSxnQkFBQTtBQUNGOztBQUVBO0VBQ0Usa0JBQUE7QUFDRjs7QUFFQTtFQUNFLGNBQUE7QUFDRjs7QUFFQTtFQUNFLGNBQUE7RUFDQSxtQkFBQTtFQUNBLG1CQUFBO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIucHJvZmlsZS1jb250YWluZXIge1xuICBwYWRkaW5nOiAyMHB4O1xuICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjEpO1xufVxuXG4ucHJvZmlsZS1oZWFkZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xufVxuXG4ucHJvZmlsZS1waG90byB7XG4gIHdpZHRoOiAxMDBweDtcbiAgaGVpZ2h0OiAxMDBweDtcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xuICBvYmplY3QtZml0OiBjb3ZlcjtcbiAgbWFyZ2luLXJpZ2h0OiAyMHB4O1xufVxuXG4ucHJvZmlsZS1pbmZvIHtcbiAgZmxleDogMTtcbn1cblxuLnByb2ZpbGUtYWN0aW9ucyB7XG4gIG1hcmdpbi10b3A6IDIwcHg7XG59XG5cbi5lZGl0LWJ0biB7XG4gIG1hcmdpbi1yaWdodDogMTBweDtcbn1cblxuLmRlbGV0ZS1idG4ge1xuICBjb2xvcjogI2RjMzU0NTtcbn1cblxuLmVycm9yIHtcbiAgY29sb3I6ICNkYzM1NDU7XG4gIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gIG1hcmdpbi10b3A6IDAuMjVyZW07XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["environment","i0","ɵɵelement","ɵɵproperty","ctx_r0","profile","profilePhoto","ɵɵsanitizeUrl","ProfileViewComponent","constructor","userService","loading","error","ngOnInit","loadProfile","getProfile","subscribe","response","user","startsWith","baseApiUrl","apiUrl","replace","console","log","message","ɵɵdirectiveInject","i1","UserService","selectors","decls","vars","consts","template","ProfileViewComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","ProfileViewComponent_img_4_Template","ɵɵlistener","ProfileViewComponent_Template_button_click_39_listener","logout","ɵɵadvance","ɵɵtextInterpolate","name","email","mobile"],"sources":["E:\\MEAN__OTP\\frontend\\src\\app\\user\\profile-view\\profile-view.component.ts","E:\\MEAN__OTP\\frontend\\src\\app\\user\\profile-view\\profile-view.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { UserService } from '../../services/user.service';\nimport { environment } from '../../../environments/environment';\n\n@Component({\n  selector: 'app-profile-view',\n  templateUrl: './profile-view.component.html',\n  styleUrls: ['./profile-view.component.scss']\n})\nexport class ProfileViewComponent implements OnInit {\n  profile: any;\n  loading = true;\n  error = '';\n\n  constructor(private userService: UserService) {}\n\n  ngOnInit() {\n    this.loadProfile();\n  }\n\n  loadProfile() {\n    this.userService.getProfile()\n      .subscribe(\n        (response) => {\n          // Patch profilePhoto to be absolute if needed\n          if (response.user && response.user.profilePhoto) {\n            if (response.user.profilePhoto.startsWith('/uploads')) {\n              // Only prepend if it's a relative path\n              const baseApiUrl = environment.apiUrl.replace(/\\/api$/, '');\n              response.user.profilePhoto = baseApiUrl + response.user.profilePhoto;\n            }\n            // If already absolute (starts with http), do nothing\n          }\n          this.profile = response.user;\n          console.log('Loaded profile:', this.profile);\n          this.loading = false;\n        },\n        (error) => {\n          this.error = error.message;\n          this.loading = false;\n        }\n      );\n  }\n}\n","<div class=\"container\">\n  <h1 class=\"profile-title\">Profile</h1>\n  <div class=\"alert alert-success d-flex align-items-center mt-4\" style=\"font-size:1.1rem;\">\n    <img \n      *ngIf=\"profile?.profilePhoto\"\n      [src]=\"profile.profilePhoto\" \n      alt=\"Profile Photo\"\n      class=\"profile-photo me-3\"\n      style=\"width:60px;height:60px;object-fit:cover;border-radius:50%;border:2px solid #198754;\"\n    >\n    <span class=\"me-2\" style=\"font-size:1.5rem;color:#198754;\">&#10003;</span>\n    <div>\n      <strong>Credentials Verified!</strong><br>\n      Your credentials have been successfully verified. You are now logged in.\n    </div>\n  </div>\n  <div class=\"alert alert-success d-flex align-items-center mt-4\" style=\"font-size:1.1rem;\">\n    <span class=\"me-2\" style=\"font-size:1.5rem;color:#198754;\">&#10003;</span>\n    <div>\n      <strong>OTP Verified!</strong><br>\n      Your OTP has been successfully verified. You are now logged in.\n    </div>\n  </div>\n  <div class=\"card\">\n    <div class=\"profile-header\">\n      <img [src]=\"profile?.profilePhoto || 'assets/kamal.jpg'\" \n           alt=\"Profile Photo\" \n           class=\"profile-photo\">\n      <h2>{{ profile?.name }}</h2>\n    </div>\n\n    <div class=\"profile-info\">\n      <div class=\"info-item\">\n        <span class=\"label\">Email:</span>\n        <span class=\"value\">{{ profile?.email }}</span>\n      </div>\n      <div class=\"info-item\">\n        <span class=\"label\">Mobile:</span>\n        <span class=\"value\">{{ profile?.mobile }}</span>\n      </div>\n    </div>\n\n    <div class=\"actions\">\n      <button class=\"btn btn-primary\" routerLink=\"/profile/edit\">Edit Profile</button>\n      <button class=\"btn btn-danger ms-2\" (click)=\"logout()\">Logout</button>\n    </div>\n  </div>\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}