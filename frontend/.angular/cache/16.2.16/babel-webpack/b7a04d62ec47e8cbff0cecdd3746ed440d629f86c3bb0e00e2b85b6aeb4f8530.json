{"ast":null,"code":"import { environment } from '../../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/user.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nfunction ProfileViewComponent_img_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 14);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r0.profile.profilePhoto, i0.ɵɵsanitizeUrl);\n  }\n}\nexport let ProfileViewComponent = /*#__PURE__*/(() => {\n  class ProfileViewComponent {\n    constructor(userService) {\n      this.userService = userService;\n      this.loading = true;\n      this.error = '';\n    }\n    ngOnInit() {\n      this.loadProfile();\n    }\n    loadProfile() {\n      this.userService.getProfile().subscribe(response => {\n        // Patch profilePhoto to be absolute if needed\n        if (response.user && response.user.profilePhoto) {\n          if (response.user.profilePhoto.startsWith('/uploads')) {\n            // Only prepend if it's a relative path\n            const baseApiUrl = environment.apiUrl.replace(/\\/api$/, '');\n            response.user.profilePhoto = baseApiUrl + response.user.profilePhoto;\n          }\n          // If already absolute (starts with http), do nothing\n        }\n\n        this.profile = response.user;\n        console.log('Loaded profile:', this.profile);\n        this.loading = false;\n      }, error => {\n        this.error = error.message;\n        this.loading = false;\n      });\n    }\n    static {\n      this.ɵfac = function ProfileViewComponent_Factory(t) {\n        return new (t || ProfileViewComponent)(i0.ɵɵdirectiveInject(i1.UserService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ProfileViewComponent,\n        selectors: [[\"app-profile-view\"]],\n        decls: 39,\n        vars: 5,\n        consts: [[1, \"container\"], [1, \"profile-title\"], [1, \"alert\", \"alert-success\", \"d-flex\", \"align-items-center\", \"mt-4\", 2, \"font-size\", \"1.1rem\"], [\"alt\", \"Profile Photo\", \"class\", \"profile-photo me-3\", \"style\", \"width:60px;height:60px;object-fit:cover;border-radius:50%;border:2px solid #198754;\", 3, \"src\", 4, \"ngIf\"], [1, \"me-2\", 2, \"font-size\", \"1.5rem\", \"color\", \"#198754\"], [1, \"card\"], [1, \"profile-header\"], [\"alt\", \"Profile Photo\", 1, \"profile-photo\", 3, \"src\"], [1, \"profile-info\"], [1, \"info-item\"], [1, \"label\"], [1, \"value\"], [1, \"actions\"], [\"routerLink\", \"/profile/edit\", 1, \"btn\", \"btn-primary\"], [\"alt\", \"Profile Photo\", 1, \"profile-photo\", \"me-3\", 2, \"width\", \"60px\", \"height\", \"60px\", \"object-fit\", \"cover\", \"border-radius\", \"50%\", \"border\", \"2px solid #198754\", 3, \"src\"]],\n        template: function ProfileViewComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n            i0.ɵɵtext(2, \"Profile\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"div\", 2);\n            i0.ɵɵtemplate(4, ProfileViewComponent_img_4_Template, 1, 1, \"img\", 3);\n            i0.ɵɵelementStart(5, \"span\", 4);\n            i0.ɵɵtext(6, \"\\u2713\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"div\")(8, \"strong\");\n            i0.ɵɵtext(9, \"Credentials Verified!\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(10, \"br\");\n            i0.ɵɵtext(11, \" Your credentials have been successfully verified. You are now logged in. \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(12, \"div\", 2)(13, \"span\", 4);\n            i0.ɵɵtext(14, \"\\u2713\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"div\")(16, \"strong\");\n            i0.ɵɵtext(17, \"OTP Verified!\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(18, \"br\");\n            i0.ɵɵtext(19, \" Your OTP has been successfully verified. You are now logged in. \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(20, \"div\", 5)(21, \"div\", 6);\n            i0.ɵɵelement(22, \"img\", 7);\n            i0.ɵɵelementStart(23, \"h2\");\n            i0.ɵɵtext(24);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(25, \"div\", 8)(26, \"div\", 9)(27, \"span\", 10);\n            i0.ɵɵtext(28, \"Email:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(29, \"span\", 11);\n            i0.ɵɵtext(30);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(31, \"div\", 9)(32, \"span\", 10);\n            i0.ɵɵtext(33, \"Mobile:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(34, \"span\", 11);\n            i0.ɵɵtext(35);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(36, \"div\", 12)(37, \"button\", 13);\n            i0.ɵɵtext(38, \" Edit Profile \");\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.profile == null ? null : ctx.profile.profilePhoto);\n            i0.ɵɵadvance(18);\n            i0.ɵɵproperty(\"src\", (ctx.profile == null ? null : ctx.profile.profilePhoto) || \"assets/kamal.jpg\", i0.ɵɵsanitizeUrl);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate(ctx.profile == null ? null : ctx.profile.name);\n            i0.ɵɵadvance(6);\n            i0.ɵɵtextInterpolate(ctx.profile == null ? null : ctx.profile.email);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate(ctx.profile == null ? null : ctx.profile.mobile);\n          }\n        },\n        dependencies: [i2.NgIf, i3.RouterLink],\n        styles: [\".profile-container[_ngcontent-%COMP%]{padding:20px;background:white;border-radius:8px;box-shadow:0 2px 4px #0000001a}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.profile-photo[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;margin-right:20px}.profile-info[_ngcontent-%COMP%]{flex:1}.profile-actions[_ngcontent-%COMP%]{margin-top:20px}.edit-btn[_ngcontent-%COMP%]{margin-right:10px}.delete-btn[_ngcontent-%COMP%]{color:#dc3545}.error[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}\"]\n      });\n    }\n  }\n  return ProfileViewComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}