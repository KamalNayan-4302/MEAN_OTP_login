{"ast":null,"code":"import { environment } from '../../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/user.service\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"@angular/router\";\nexport let ProfileViewComponent = /*#__PURE__*/(() => {\n  class ProfileViewComponent {\n    constructor(userService, authService, router) {\n      this.userService = userService;\n      this.authService = authService;\n      this.router = router;\n      this.loading = true;\n      this.error = '';\n    }\n    ngOnInit() {\n      this.loadProfile();\n    }\n    logout() {\n      this.authService.logout();\n      this.router.navigate(['/login']);\n    }\n    loadProfile() {\n      this.userService.getProfile().subscribe(response => {\n        // Patch profilePhoto to be absolute if needed\n        if (response.user && response.user.profilePhoto) {\n          if (response.user.profilePhoto.startsWith('/uploads')) {\n            // Only prepend if it's a relative path\n            const baseApiUrl = environment.apiUrl.replace(/\\/api$/, '');\n            response.user.profilePhoto = baseApiUrl + response.user.profilePhoto;\n          }\n          // If already absolute (starts with http), do nothing\n        }\n\n        this.profile = response.user;\n        console.log('Loaded profile:', this.profile);\n        this.loading = false;\n      }, error => {\n        this.error = error.message;\n        this.loading = false;\n      });\n    }\n    static {\n      this.ɵfac = function ProfileViewComponent_Factory(t) {\n        return new (t || ProfileViewComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ProfileViewComponent,\n        selectors: [[\"app-profile-view\"]],\n        decls: 33,\n        vars: 4,\n        consts: [[1, \"container\"], [1, \"profile-title\"], [1, \"alert\", \"alert-success\", \"d-flex\", \"align-items-center\", \"mt-4\", 2, \"font-size\", \"1.1rem\"], [1, \"me-2\", 2, \"font-size\", \"1.5rem\"], [1, \"credentials-welcome\"], [1, \"card\"], [1, \"profile-header\"], [\"alt\", \"Profile Photo\", 1, \"profile-photo\", 3, \"src\"], [1, \"profile-info\"], [1, \"info-item\"], [1, \"label\"], [1, \"value\"], [1, \"profile-actions\"], [\"routerLink\", \"/profile/edit\", 1, \"btn\", \"btn-primary\", \"edit-btn\"], [1, \"btn\", \"btn-primary\", \"logout-btn\", 3, \"click\"]],\n        template: function ProfileViewComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n            i0.ɵɵtext(2, \"Profile\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"div\", 2)(4, \"span\", 3);\n            i0.ɵɵtext(5, \"\\u2713\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"div\")(7, \"strong\");\n            i0.ɵɵtext(8, \"Credentials Verified!\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(9, \"br\");\n            i0.ɵɵelementStart(10, \"span\", 4);\n            i0.ɵɵtext(11, \"Welcome back! You\\u2019ve successfully logged in.\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(12, \"div\", 5)(13, \"div\", 6);\n            i0.ɵɵelement(14, \"img\", 7);\n            i0.ɵɵelementStart(15, \"h2\");\n            i0.ɵɵtext(16);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(17, \"div\", 8)(18, \"div\", 9)(19, \"span\", 10);\n            i0.ɵɵtext(20, \"Email:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(21, \"span\", 11);\n            i0.ɵɵtext(22);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(23, \"div\", 9)(24, \"span\", 10);\n            i0.ɵɵtext(25, \"Mobile:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(26, \"span\", 11);\n            i0.ɵɵtext(27);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(28, \"div\", 12)(29, \"button\", 13);\n            i0.ɵɵtext(30, \"Edit Profile\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(31, \"button\", 14);\n            i0.ɵɵlistener(\"click\", function ProfileViewComponent_Template_button_click_31_listener() {\n              return ctx.logout();\n            });\n            i0.ɵɵtext(32, \"Logout\");\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(14);\n            i0.ɵɵproperty(\"src\", (ctx.profile == null ? null : ctx.profile.profilePhoto) || \"assets/kamal.jpg\", i0.ɵɵsanitizeUrl);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate(ctx.profile == null ? null : ctx.profile.name);\n            i0.ɵɵadvance(6);\n            i0.ɵɵtextInterpolate(ctx.profile == null ? null : ctx.profile.email);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate(ctx.profile == null ? null : ctx.profile.mobile);\n          }\n        },\n        dependencies: [i3.RouterLink],\n        styles: [\".profile-container[_ngcontent-%COMP%]{padding:20px;background:white;border-radius:8px;box-shadow:0 2px 4px #0000001a}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.profile-photo[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;margin-right:20px}.profile-info[_ngcontent-%COMP%]{flex:1}.profile-actions[_ngcontent-%COMP%]{margin-top:20px}.credentials-welcome[_ngcontent-%COMP%]{margin-top:6px;display:inline-block}.edit-btn[_ngcontent-%COMP%]{margin-right:16px}.logout-btn[_ngcontent-%COMP%]{margin-left:0}.delete-btn[_ngcontent-%COMP%]{color:#dc3545}.error[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}\"]\n      });\n    }\n  }\n  return ProfileViewComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}